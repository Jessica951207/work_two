(function(a){a.fn.extend({ImageSwitch:function(f){var n={Btn_Prev:".left",Btn_Next:".right",Speed:500,AutoPlay:false,AutoTime:2000,Loop:false,Stat:false,CreatePosi:a("body"),StatActive:"active",direction:"horizontal",Effect:"slide",Hover:false,PageNum:false,Scroll:false,CoolDown:2000,Translate:false,TransNum:0,TransCoolDown:500,Prevcallback:function(){},Nextcallback:function(){},HoverStop:true,Touch:false,TouchDirection:[80,"left","right"],Compact:"CSS2",Curve:"linear",Destory:false,AutoSize:[false,300],Debug:false},j=a(this),k=a.extend(n,f),g=j.length;var D=0;var s,h=j.width(),d=j.height();if(f==arguments[0]){D=0}else{return false}if(k.AutoSize[0]){a(window).resize(function(E){E.stopPropagation();setTimeout(t,k.AutoSize[1])})}else{t()}if(k.Destory){D=0}function m(){if(k.direction==="horizontal"){j.width(j.parent().width()/g).height(j.parent().height());h=(j.parent().width()/g);d=j.parent().height()}else{if(k.direction==="vertical"){j.width(j.parent().width()).height(j.parent().height()/g);h=j.parent().width();d=(j.parent().height()/g)}}}function c(){if(D===0){a(k.Btn_Prev).addClass("disable")}else{a(k.Btn_Prev).removeClass("disable")}if(D===a(j.selector).length-1){a(k.Btn_Next).addClass("disable")}else{a(k.Btn_Next).removeClass("disable")}}function w(){j.parent().stop(true,true);if(D===0){return}else{switch(k.Effect){case"slide":o();break;case"fade":b();break}}e()}function x(){g=a(j.selector).length;j=a(j.selector);j.parent().stop(true,true);if(D===g-1){if(k.Loop){t()}else{return}return}else{switch(k.Effect){case"slide":q();break;case"fade":u();break}}e()}if(k.HoverStop){j.hover(function(){clearInterval(s)},function(){if(k.AutoPlay){r()}})}function r(){clearInterval(s);if(k.AutoPlay){s=setInterval(x,k.AutoTime)}}function B(){if(k.PageNum){k.CreatePosi.children(".Pd-ImageSwitch").empty();k.CreatePosi.append("<span class='Pd-ImageSwitch'></span>");for(var F=0;F<g;F++){var E=a(j).eq(F).find("img").attr("alt");if(E=="undefined"){k.CreatePosi.children(".Pd-ImageSwitch").append("<a href='javascript:void(0);'>"+(F+1)+"</a>")}else{k.CreatePosi.children(".Pd-ImageSwitch").append("<a href='javascript:void(0);'>"+E+"</a>")}}}k.CreatePosi.children(".Pd-ImageSwitch").find("a").first().addClass(k.StatActive);k.CreatePosi.children(".Pd-ImageSwitch").find("a").each(function(G){if(k.Hover){a(this).hover(function(){if(k.Loop){r()}y(G)})}else{a(this).click(function(){if(k.Loop){r()}y(G)})}})}function y(E){k.CreatePosi.children(".Pd-ImageSwitch").find("a").addClass(k.StatActive).siblings().removeClass(k.StatActive);D=E-1;x()}function e(){if(k.Stat){k.CreatePosi.children(".Pd-ImageSwitch").find("a").eq(D).addClass(k.StatActive).siblings().removeClass(k.StatActive);j.eq(D).addClass(k.StatActive).siblings().removeClass(k.StatActive)}else{return}}function C(){var E=false;var F=function(G){G=G||window.event;if(G.wheelDelta==undefined){return alert("请使用1.4.1版本jQuery！")}if(!E){E=true;if(G.wheelDelta<0||G.detail>0){x()}else{w()}}else{return}};setInterval(function(){E=false},k.CoolDown);j.bind("mousewheel",F).bind("DOMMouseScroll",F).hover(function(){a(document).bind("mousewheel",function(){return false}).bind("DOMMouseScroll",function(){return false})},function(){a(document).unbind("mousewheel").unbind("DOMMouseScroll")})}function p(F,E){F.bind("transitionend",function(){E()}).bind("webkitTransitionEnd",function(){E()})}function A(E){E.unbind("transitionend").unbind("webkitTransitionEnd")}function v(E){if(typeof(E)==="function"){E()}}function q(){D++;if(k.direction==="horizontal"){switch(k.Compact){case"CSS2":l("horizontal",k.Nextcallback);break;case"CSS3":i("horizontal",k.Nextcallback);break}}else{if(k.direction==="vertical"){switch(k.Compact){case"CSS2":l("vertical",k.Nextcallback);break;case"CSS3":i("vertical",k.Nextcallback);break}}else{return console.error("请填入正确的切换方向(horizontal、vertical)")}}}function o(){D--;if(k.direction==="horizontal"){switch(k.Compact){case"CSS2":l("horizontal",k.Prevcallback);break;case"CSS3":i("horizontal",k.Prevcallback);break}}else{if(k.direction==="vertical"){switch(k.Compact){case"CSS2":l("vertical",k.Prevcallback);break;case"CSS3":i("vertical",k.Prevcallback);break}}else{return console.error("请填入正确的切换方向(horizontal、vertical)")}}}function u(){D++;j.eq(D).fadeIn(k.Speed).siblings().fadeOut(function(){k.Nextcallback()})}function b(){D--;j.eq(D).fadeIn(k.Speed).siblings().fadeOut(function(){k.Prevcallback()})}function l(E,F){switch(E){case"horizontal":j.parent().animate({left:-1*(h*D)+"px"},k.Speed,function(){v(F)});break;case"vertical":j.parent().animate({top:-1*(d*D)+"px"},k.Speed,function(){v(F)});break}}function i(E,F){j.parent().css({transition:"transform "+k.Speed/1000+"s "+k.Curve,"-webkit-transition":"transform "+k.Speed/1000+"s "+k.Curve});switch(E){case"horizontal":j.parent().css({transform:"translate("+(-1*(h*D))+"px,0)","-webkit-transform":"translate("+(-1*(h*D))+"px,0)"});p(j.parent(),function(){v(F);A(j.parent(),v)});break;case"vertical":j.parent().css({transform:"translate(0,"+(-1*(d*D))+"px)","-webkit-transform":"translate(0,"+(-1*(d*D))+"px)"});p(j.parent(),function(){v(F);A(j.parent(),v)});break}}function z(){j.Touch({range:k.TouchDirection[0],direction:k.TouchDirection[1],callback:function(){if(k.Loop){clearInterval(s);setTimeout(function(){r()},k.CoolDown)}x()}});j.Touch({range:k.TouchDirection[0],direction:k.TouchDirection[2],callback:function(){if(k.Loop){clearInterval(s);setTimeout(function(){r()},k.CoolDown)}w()}})}if(k.Stat){B()}if(k.Scroll){C()}if(k.Translate&&k.TransNum!==null){setTimeout(function(){y(k.TransNum)},k.TransCoolDown)}function t(){a(k.Btn_Prev).addClass("disable");switch(k.Effect){case"slide":switch(k.Compact){case"CSS2":j.parent().animate({left:"0px",top:"0px"});break;case"CSS3":j.parent().css({transform:"translate(0,0)","-webkit-transform":"translate(0,0)"})}break;case"fade":j.first().fadeIn().siblings().fadeOut();break}D=0;e();clearInterval(s);a(k.Btn_Prev).unbind("click");a(k.Btn_Next).unbind("click");m();setInterval(c,0);if(k.AutoPlay){s=setInterval(x,k.AutoTime)}if(k.Touch){j.Touch({Destory:true});z()}a(k.Btn_Prev).click(function(){if(k.Loop){r()}w()});a(k.Btn_Next).click(function(){if(k.Loop){r()}x()})}}})})(jQuery);
